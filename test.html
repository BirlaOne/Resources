<!DOCTYPE html>
<html lang="mr" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Marathi QB - BirlaOne</title>
  <link rel="icon" type="image/png" href="https://i.ibb.co/N6QNPW56/logo-1-modified.png" />
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <script>
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>

  <style>
    :root {
      --primary-accent: #56ab2f;
      --primary-gradient: linear-gradient(90deg, #a8e063, #56ab2f);
      --danger-color: #e53935;
      --correct-color: #2e7d32;
      --incorrect-color: #c62828;
      --font-sans: 'Inter', sans-serif;
      --font-serif: 'Lora', serif;
      --border-radius: 14px;
      --transition-speed: 0.3s;
    }
    
    html[data-theme="light"] {
      --bg-color: #f7f7f9; --card-bg: #ffffff; --card-bg-rgb: 255, 255, 255; --text-primary: #1c1c1e; --text-secondary: #636366; --border-color: #e5e5ea; --shadow: 0 6px 25px rgba(0, 0, 0, 0.07); --header-bg: rgba(255, 255, 255, 0.8); --input-bg: #f0f0f0;
    }
    html[data-theme="dark"] {
      --bg-color: #121212; --card-bg: #1e1e1e; --card-bg-rgb: 30, 30, 30; --text-primary: #f2f2f7; --text-secondary: #98989f; --border-color: #38383a; --shadow: 0 6px 25px rgba(0, 0, 0, 0.2); --header-bg: rgba(28, 28, 30, 0.75); --input-bg: #2c2c2e;
    }
    html[data-theme="sepia"] {
        --bg-color: #f4ecd8; --card-bg: #fbf5e9; --text-primary: #5b4636; --text-secondary: #7d6b59; --border-color: #dcd0b9; --primary-accent: #a98244; --primary-gradient: linear-gradient(135deg, #c5a265, #a98244); --shadow: 0 6px 25px rgba(0, 0, 0, 0.1); --header-bg: rgba(244, 236, 216, 0.8); --input-bg: #e9deca;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    body { font-family: var(--font-sans); background-color: var(--bg-color); color: var(--text-primary); transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease; user-select: none; -webkit-user-select: none; -moz-user-select: none; }

    .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--header-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border-color); }
    .top-bar .title { font-family: 'Pacifico', cursive; font-size: 26px; font-weight: 400; color: var(--text-primary); }
    .menu-toggle { background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; }
    .menu-icon { color: var(--text-primary); font-size: 24px; }
    .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 199; opacity: 0; visibility: hidden; transition: opacity 0.3s ease; }
    .sidebar-overlay.active { opacity: 1; visibility: visible; }
    .sidebar { position: fixed; top: 0; left: 0; width: 280px; height: 100%; background: var(--card-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); box-shadow: 2px 0 20px rgba(0,0,0,0.2); transform: translateX(-100%); transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94); z-index: 200; display: flex; flex-direction: column; }
    .sidebar.active { transform: translateX(0); }
    .sidebar-profile-card { display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid var(--border-color); }
    .sidebar-profile-img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary-accent); object-fit: cover; }
    #sidebar-username { font-weight: 600; font-size: 18px; }
    #sidebar-user-id { font-size: 14px; color: var(--text-secondary); }
    .sidebar nav { flex-grow: 1; padding: 10px 0; }
    .sidebar nav a { display: flex; align-items: center; gap: 15px; color: var(--text-primary); text-decoration: none; padding: 15px 20px; font-weight: 500; transition: all 0.2s; border-radius: 0 30px 30px 0; margin-right: 10px; }
    .sidebar nav a:hover, .sidebar nav a.active { background-color: rgba(86, 171, 47, 0.1); color: var(--primary-accent); }
    .nav-icon { width: 24px; height: 24px; stroke-width: 2; }
    .sidebar-footer { padding: 20px; margin-top: auto; border-top: 1px solid var(--border-color); }
    .logout-button { width: 100%; padding: 12px; border: none; border-radius: 8px; background: var(--danger-color); color: white; font-weight: 600; cursor: pointer; }
    .theme-selector select { background-color: var(--input-bg); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: 8px; padding: 6px 10px; font-size: 14px; -webkit-appearance: none; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 8px center; padding-right: 28px; }

    .container { padding: 16px; max-width: 800px; margin: 0 auto; position: relative; }
    .note-card { font-family: var(--font-serif); background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius); box-shadow: var(--shadow); margin-bottom: 24px; overflow: hidden; }
    .note-title { font-family: var(--font-sans); font-size: 22px; font-weight: 700; padding: 18px 22px; background: var(--primary-gradient); color: white; }
    .note-body { padding: 12px 22px 22px 22px; }
    .note-body h3 { font-family: var(--font-sans); font-size: 1.2rem; border-bottom: 2px solid var(--primary-accent); padding-bottom: 6px; margin: 24px 0 12px 0; }
    .note-body p { margin-bottom: 16px; text-align: justify; line-height: 1.8; font-size: 17px; }
    .note-body ol { list-style: none; padding-left: 0; } .note-body ol > li { margin-bottom: 28px; padding-left: 10px; }
    .translation { color: var(--text-secondary); font-size: 0.9em; font-style: italic; margin-top: -8px; }

    .view-switch { display: flex; background-color: var(--input-bg); border-radius: 10px; padding: 4px; margin-bottom: 24px; border: 1px solid var(--border-color); }
    .view-switch label { flex: 1; text-align: center; padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
    .radio-inputs { display: none; }
    #brief-view-radio:checked ~ #main-content-wrapper .view-switch label[for="brief-view-radio"],
    #mcq-view-radio:checked ~ #main-content-wrapper .view-switch label[for="mcq-view-radio"] { background: var(--card-bg); color: var(--primary-accent); box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    #brief-questions-container, #mcq-container { display: none; }
    #brief-view-radio:checked ~ #main-content-wrapper #brief-questions-container,
    #mcq-view-radio:checked ~ #main-content-wrapper #mcq-container { display: block; }
    
    .mcq-topic-card { background: var(--card-bg); border-radius: var(--border-radius); box-shadow: var(--shadow); margin-bottom: 24px; border: 1px solid var(--border-color); }
    .mcq-topic-card h2 { font-size: 20px; font-weight: 700; padding: 16px; border-bottom: 1px solid var(--border-color); }
    .mcq-item { padding: 16px; border-bottom: 1px solid var(--border-color); }
    .mcq-item:last-child { border-bottom: none; }
    .mcq-question { font-weight: 600; margin-bottom: 16px; font-size: 16px; }
    .mcq-options { display: grid; grid-template-columns: 1fr; gap: 10px; }
    .mcq-option { width: 100%; text-align: left; background-color: var(--input-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 12px; font-family: var(--font-sans); font-size: 15px; cursor: pointer; transition: all 0.2s ease; }
    .mcq-option:hover { border-color: var(--primary-accent); }
    .mcq-option.correct-selected { background-color: var(--correct-color); color: white; border-color: var(--correct-color); }
    .mcq-option.incorrect-selected { background-color: var(--incorrect-color); color: white; border-color: var(--incorrect-color); }
    .mcq-option.reveal-correct { background-color: transparent; border: 2px solid var(--correct-color); color: var(--correct-color); }
    .mcq-options.answered .mcq-option:not(.incorrect-selected):not(.reveal-correct) { opacity: 0.6; }

    #main-content-wrapper.locked > *:not(.lock-overlay) { filter: blur(8px); -webkit-filter: blur(8px); pointer-events: none; }
    .lock-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 2; }
    .lock-overlay-content { background: rgba(var(--card-bg-rgb), 0.7); backdrop-filter: blur(2px); padding: 20px 30px; border-radius: 12px; box-shadow: var(--shadow); font-weight: 600; border: 1px solid var(--border-color); }
  </style>
</head>
<body>
  
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-profile-card">
      <img src="" id="sidebarProfilePic" class="sidebar-profile-img" alt="Profile"/>
      <div class="sidebar-user-info">
        <div id="sidebar-username">Loading...</div>
        <div id="sidebar-user-id">Student ID: ...</div>
      </div>
    </div>
    <nav>
      <a href="https://birlaone.github.io/BirlaOne/index.html"><svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg><span>Home</span></a>
      <a href="#" class="active"><svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg><span>QB (Marathi)</span></a>
    </nav>
    <div class="sidebar-footer"><button class="logout-button" onclick="logout()">Logout</button></div>
  </aside>

  <header class="top-bar">
    <button class="menu-toggle" onclick="toggleSidebar()"><span class="menu-icon">‚ò∞</span></button>
    <h1 class="title">BirlaOne</h1>
    <div class="theme-selector">
        <select id="themeSelect" onchange="changeTheme(this.value)" aria-label="Select theme">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="sepia">Sepia</option>
        </select>
    </div>
  </header>
  
  <div class="radio-inputs">
      <input type="radio" id="brief-view-radio" name="view-toggle" checked>
      <input type="radio" id="mcq-view-radio" name="view-toggle">
  </div>

  <main class="container" id="main-content-wrapper">
    <div class="view-switch">
        <label for="brief-view-radio">Brief Questions</label>
        <label for="mcq-view-radio">MCQs</label>
    </div>

    <div id="brief-questions-container">
        </div>
    <div id="mcq-container">
        </div>
  </main>

<script>
    const SUPABASE_URL = 'https://eikriuddsuguybvvyzjl.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpa3JpdWRkc3VndXlidnZ5empsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjIxNTAsImV4cCI6MjA3MzY5ODE1MH0.HNh2gGO8nWzAjxh5Oa3cs_8WKaq9mq9TyLCvPOkcr2c';
    const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    
    // UI & UTILITY
    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); document.getElementById('sidebarOverlay').classList.toggle('active'); }
    function changeTheme(theme) { document.documentElement.setAttribute('data-theme', theme); localStorage.setItem('theme', theme); }
    async function logout() { await client.auth.signOut(); window.location.href = "https://birlaone.github.io/BirlaOne/login.html"; }

    // SECURITY & PERMISSION
    function lockContentSection() {
        const wrapper = document.getElementById('main-content-wrapper');
        wrapper.innerHTML = ''; wrapper.classList.add('locked');
        const overlay = Object.assign(document.createElement('div'), { className: 'lock-overlay', innerHTML: `<div class="lock-overlay-content">üîí Unauthorized Access</div>` });
        wrapper.appendChild(overlay);
    }
    document.addEventListener('copy', (e) => { e.preventDefault(); e.clipboardData?.setData('text/plain', 'Goli beta masti nahi'); });

    // MCQ INTERACTIVITY
    function checkAnswer(selectedOption, correctAnswer) {
        const optionsContainer = selectedOption.parentElement;
        if (optionsContainer.classList.contains('answered')) return;
        optionsContainer.classList.add('answered');
        const selected = selectedOption.getAttribute('data-option');
        if (selected === correctAnswer) {
            selectedOption.classList.add('correct-selected');
        } else {
            selectedOption.classList.add('incorrect-selected');
            const correctButton = optionsContainer.querySelector(`[data-option="${correctAnswer}"]`);
            correctButton?.classList.add('reveal-correct');
        }
    }
    
    // DATA FETCHING & RENDERING
    async function fetchAndSetCurrentUser(session) {
      const { data, error } = await client.from('users').select('id, img, name, c_permission').eq('auth_id', session.user.id).single();
      if (error || !data) { console.error('Error fetching user profile:', error); return null; }
      
      const picUrl = data.img || 'https://t4.ftcdn.net/jpg/05/89/93/27/360_F_589932782_vQAEAZhHnq1QCGu5ikwrYaQD0Mmurm0N.jpg';
      document.getElementById('sidebarProfilePic').src = picUrl;
      document.getElementById('sidebar-username').innerText = data.name || 'Student';
      document.getElementById('sidebar-user-id').innerText = `Student ID: ${data.id || 'N/A'}`;
      return data;
    }
    
    function renderBriefQuestions(container) {
        container.innerHTML = `
            <article class="note-card"> <h2 class="note-title">‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡•ß: ‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä (‡§¨‡•ç‡§≤‡•â‡§ó) ‡§≤‡•á‡§ñ‡§®‡§æ‡§ö‡•Ä ‡§â‡§¶‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü‡•á ‡§≤‡§ø‡§π‡§æ.</h2> <div class="note-body"> <h3>‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ</h3> <p>‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä, ‡§ú‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á '‡§¨‡•ç‡§≤‡•â‡§ó' (Blog) ‡§Ö‡§∏‡•á‡§π‡•Ä ‡§Æ‡•ç‡§π‡§£‡§§‡§æ‡§§, ‡§π‡•á ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü‡§µ‡§∞ ‡§Ü‡§™‡§≤‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞, ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§Ü‡§£‡§ø ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≤‡•ã‡§ï‡§æ‡§Ç‡§™‡§∞‡•ç‡§Ø‡§Ç‡§§ ‡§™‡•ã‡§π‡•ã‡§ö‡§µ‡§£‡•ç‡§Ø‡§æ‡§ö‡•á ‡§è‡§ï ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§Ü‡§π‡•á...</p> <h3>‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§®‡§æ‡§ö‡•Ä ‡§â‡§¶‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü‡•á</h3> <ol><li><p><strong>‡§µ‡•à‡§ö‡§æ‡§∞‡§ø‡§ï ‡§Ü‡§£‡§ø ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§Ö‡§≠‡§ø‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡•Ä</strong></p><p>‡§¨‡•ç‡§≤‡•â‡§ó ‡§π‡•á ‡§Ü‡§™‡§≤‡•á ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§µ‡§ø‡§ö‡§æ‡§∞, ‡§Æ‡§§‡•á, ‡§≠‡§æ‡§µ‡§®‡§æ ‡§Ü‡§£‡§ø ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§≤‡•ã‡§ï‡§æ‡§Ç‡§∏‡§Æ‡•ã‡§∞ ‡§Æ‡§æ‡§Ç‡§°‡§£‡•ç‡§Ø‡§æ‡§ö‡•á ‡§è‡§ï ‡§â‡§§‡•ç‡§§‡§Æ ‡§∏‡§æ‡§ß‡§® ‡§Ü‡§π‡•á...</p><p class="translation">A blog is an excellent tool to present your personal thoughts, opinions, feelings, and experiences to the public.</p></li></ol> </div> </article>
            `;
    }

    function renderMcqQuestions(container) {
        const mcqTopics = [
            { title: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§® (Diary Writing)", questions: [
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§®‡§æ‡§ö‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§â‡§¶‡•ç‡§¶‡•á‡§∂ ‡§ï‡•ã‡§£‡§§‡§æ ‡§Ü‡§π‡•á?", o: ["‡§á‡§§‡§∞‡§æ‡§Ç‡§®‡§æ ‡§™‡§§‡•ç‡§∞ ‡§≤‡§ø‡§π‡§ø‡§£‡•á", "‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§Ö‡§®‡•Å‡§≠‡§µ‡§æ‡§Ç‡§ö‡•Ä ‡§®‡•ã‡§Ç‡§¶ ‡§ï‡§∞‡§£‡•á", "‡§µ‡•É‡§§‡•ç‡§§‡§™‡§§‡•ç‡§∞‡§æ‡§§ ‡§≤‡•á‡§ñ ‡§≤‡§ø‡§π‡§ø‡§£‡•á", "‡§ï‡§µ‡§ø‡§§‡§æ ‡§≤‡§ø‡§π‡§ø‡§£‡•á"], a: "b" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§® ‡§ï‡§∞‡§§‡§æ‡§®‡§æ ‡§ï‡•ã‡§£‡§§‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§≤‡§ø‡§π‡§ø‡§≤‡•Ä ‡§ú‡§æ‡§§‡•á?", o: ["‡§â‡§¶‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ", "‡§ï‡§æ‡§≤‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ", "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¶‡§ø‡§µ‡§∏‡§æ‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ", "‡§µ‡§∞‡•ç‡§∑‡§æ‡§ö‡•Ä ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§‡•Ä‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ"], a: "c" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§® ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞‡§ö‡•ç‡§Ø‡§æ ‡§≤‡•á‡§ñ‡§®‡§æ‡§§ ‡§Æ‡•ã‡§°‡§§‡•á?", o: ["‡§∏‡§∞‡•ç‡§ú‡§®‡§∂‡•Ä‡§≤ ‡§≤‡•á‡§ñ‡§®", "‡§î‡§™‡§ö‡§æ‡§∞‡§ø‡§ï ‡§≤‡•á‡§ñ‡§®", "‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞‡§ø‡§ï ‡§≤‡•á‡§ñ‡§®", "‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§≤‡•á‡§ñ‡§®"], a: "a" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§ï‡•ã‡§£‡§æ‡§∏‡§æ‡§†‡•Ä ‡§≤‡§ø‡§π‡§ø‡§≤‡•Ä ‡§ú‡§æ‡§§‡•á?", o: ["‡§Æ‡§ø‡§§‡•ç‡§∞‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä", "‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä", "‡§∏‡•ç‡§µ‡§§‡§É‡§∏‡§æ‡§†‡•Ä", "‡§ï‡•Å‡§ü‡•Å‡§Ç‡§¨‡§æ‡§∏‡§æ‡§†‡•Ä"], a: "c" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§®‡§æ‡§§ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞‡§ö‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§†‡§∞‡§§‡•á?", o: ["‡§ï‡§°‡§ï ‡§î‡§™‡§ö‡§æ‡§∞‡§ø‡§ï ‡§≠‡§æ‡§∑‡§æ", "‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§Ü‡§£‡§ø ‡§Æ‡§®‡§Æ‡•ã‡§ï‡§≥‡•Ä ‡§≠‡§æ‡§∑‡§æ", "‡§ï‡•á‡§µ‡§≥ ‡§∏‡§æ‡§π‡§ø‡§§‡•ç‡§Ø‡§ø‡§ï ‡§≠‡§æ‡§∑‡§æ", "‡§ú‡§æ‡§π‡•Ä‡§∞‡§æ‡§§‡•Ä‡§§‡•Ä‡§≤ ‡§≠‡§æ‡§∑‡§æ"], a: "b" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§® ‡§ï‡§∞‡§§‡§æ‡§®‡§æ ‡§∂‡•á‡§µ‡§ü‡•Ä ‡§ï‡§æ‡§Ø ‡§≤‡§ø‡§π‡§ø‡§≤‡•á ‡§ú‡§æ‡§§‡•á?", o: ["‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§π‡•Ä", "‡§µ‡•É‡§§‡•ç‡§§‡§™‡§§‡•ç‡§∞‡§æ‡§§‡•Ä‡§≤ ‡§¨‡§æ‡§§‡§Æ‡•Ä", "‡§ï‡§µ‡§ø‡§§‡§æ", "‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞"], a: "a" },
                { q: "‡§Ö‡§®‡•Å‡§¶‡§ø‡§®‡•Ä ‡§≤‡•á‡§ñ‡§®‡§æ‡§ö‡§æ ‡§ï‡§æ‡§≤‡§ñ‡§Ç‡§° ‡§ï‡•ã‡§£‡§§‡§æ ‡§Ö‡§∏‡§§‡•ã?", o: ["‡§Ü‡§†‡§µ‡§°‡•ç‡§Ø‡§æ‡§§‡•Ç‡§® ‡§è‡§ï‡§¶‡§æ", "‡§Æ‡§π‡§ø‡§®‡•ç‡§Ø‡§æ‡§§‡•Ç‡§® ‡§è‡§ï‡§¶‡§æ", "‡§∞‡•ã‡§ú ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§‡§™‡§£‡•á", "‡§µ‡§∞‡•ç‡§∑‡§æ‡§§‡•Ç‡§® ‡§è‡§ï‡§¶‡§æ"], a: "c" }
            ]},
            { title: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ (Wikipedia)", questions: [
                { q: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞‡§ö‡•á ‡§∏‡§Ç‡§ï‡•á‡§§‡§∏‡•ç‡§•‡§≥ ‡§Ü‡§π‡•á?", o: ["‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ", "‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§ú‡•ç‡§û‡§æ‡§®‡§ï‡•ã‡§∂", "‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ", "‡§µ‡•É‡§§‡•ç‡§§‡§™‡§§‡•ç‡§∞"], a: "b" },
                { q: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ï‡§ß‡•Ä ‡§∏‡•ç‡§•‡§æ‡§™‡§® ‡§ù‡§æ‡§≤‡•á?", o: ["1991", "2001", "2010", "1995"], a: "b" },
                { q: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ‡§ö‡•á ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§™‡§ï ‡§ï‡•ã‡§£ ‡§Ü‡§π‡•á‡§§?", o: ["‡§Æ‡§æ‡§∞‡•ç‡§ï ‡§ù‡•Å‡§ï‡§∞‡§¨‡§∞‡•ç‡§ó", "‡§ú‡§ø‡§Æ‡•Ä ‡§µ‡•á‡§≤‡•ç‡§∏ ‡§Ü‡§£‡§ø ‡§≤‡•Ö‡§∞‡•Ä ‡§∏‡•Ö‡§Ç‡§ó‡§∞", "‡§¨‡§ø‡§≤ ‡§ó‡•á‡§ü‡•ç‡§∏", "‡§ü‡•Ä‡§Æ ‡§¨‡§∞‡•ç‡§®‡§∞‡•ç‡§∏-‡§≤‡•Ä"], a: "b" },
                { q: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ‡§µ‡§∞‡•Ä‡§≤ ‡§≤‡•á‡§ñ‡§® ‡§ï‡•ã‡§£ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã?", o: ["‡§´‡§ï‡•ç‡§§ ‡§™‡•ç‡§∞‡§æ‡§ß‡•ç‡§Ø‡§æ‡§™‡§ï", "‡§´‡§ï‡•ç‡§§ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä", "‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü‡§µ‡§∞‡•Ä‡§≤ ‡§ï‡•ã‡§£‡§§‡§æ‡§π‡•Ä ‡§µ‡§æ‡§™‡§∞‡§ï‡§∞‡•ç‡§§‡§æ", "‡§´‡§ï‡•ç‡§§ ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ï"], a: "c" },
                { q: "‡§µ‡§ø‡§ï‡§ø‡§™‡•Ä‡§°‡§ø‡§Ø‡§æ‡§µ‡§∞‡•Ä‡§≤ ‡§≤‡•á‡§ñ‡§®‡§æ‡§ö‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§â‡§¶‡•ç‡§¶‡•á‡§∂ ‡§ï‡§æ‡§Ø ‡§Ü‡§π‡•á?", o: ["‡§®‡§´‡§æ ‡§ï‡§Æ‡§æ‡§µ‡§£‡•á", "‡§ú‡•ç‡§û‡§æ‡§® ‡§∏‡§∞‡•ç‡§µ‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§ï‡§∞‡§£‡•á", "‡§ú‡§æ‡§π‡§ø‡§∞‡§æ‡§§ ‡§ï‡§∞‡§£‡•á", "‡§ï‡•á‡§µ‡§≥ ‡§Æ‡§®‡•ã‡§∞‡§Ç‡§ú‡§®"], a: "b" }
            ]},
            { title: "‡§´‡•á‡§∏‡§¨‡•Å‡§ï (Facebook)", questions: [
                { q: "‡§´‡•á‡§∏‡§¨‡•Å‡§ï‡§ö‡•Ä ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§∑‡•Ä ‡§ù‡§æ‡§≤‡•Ä?", o: ["2002", "2004", "2006", "2008"], a: "b" },
                { q: "‡§´‡•á‡§∏‡§¨‡•Å‡§ï‡§ö‡§æ ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§™‡§ï ‡§ï‡•ã‡§£ ‡§Ü‡§π‡•á?", o: ["‡§¨‡§ø‡§≤ ‡§ó‡•á‡§ü‡•ç‡§∏", "‡§Æ‡§æ‡§∞‡•ç‡§ï ‡§ù‡•Å‡§ï‡§∞‡§¨‡§∞‡•ç‡§ó", "‡§è‡§≤‡•â‡§® ‡§Æ‡§∏‡•ç‡§ï", "‡§≤‡•Ö‡§∞‡•Ä ‡§™‡•á‡§ú"], a: "b" },
                { q: "‡§´‡•á‡§∏‡§¨‡•Å‡§ï‡§®‡•á ‡§á‡§Ç‡§∏‡•ç‡§ü‡§æ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§∑‡•Ä ‡§µ‡§ø‡§ï‡§§ ‡§ò‡•á‡§§‡§≤‡•á?", o: ["2008", "2010", "2012", "2015"], a: "c" },
                { q: "‡§´‡•á‡§∏‡§¨‡•Å‡§ï‡§ö‡•á ‡§®‡§µ‡•Ä‡§® ‡§®‡§æ‡§µ (Meta) ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§∑‡•Ä ‡§ú‡§æ‡§π‡•Ä‡§∞ ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ü‡§≤‡•á?", o: ["2018", "2019", "2020", "2021"], a: "d" }
            ]}
        ];

        container.innerHTML = mcqTopics.map(topic => `
            <div class="mcq-topic-card">
                <h2>${topic.title}</h2>
                ${topic.questions.map((item, index) => `
                    <div class="mcq-item">
                        <p class="mcq-question">${index + 1}. ${item.q}</p>
                        <div class="mcq-options">
                            ${item.o.map((option, i) => `<button class="mcq-option" data-option="${String.fromCharCode(97 + i)}" onclick="checkAnswer(this, '${item.a}')">${String.fromCharCode(97 + i)}) ${option}</button>`).join('')}
                        </div>
                    </div>
                `).join('')}
            </div>
        `).join('');
    }

    // APP INITIALIZATION
    async function initializeApp(session) {
        const currentUser = await fetchAndSetCurrentUser(session);
        if (!currentUser) { alert("Could not load your profile. Please log in again."); logout(); return; }

        if (currentUser.c_permission === 'no') {
            lockContentSection();
        } else {
            renderBriefQuestions(document.getElementById('brief-questions-container'));
            renderMcqQuestions(document.getElementById('mcq-container'));
        }
    }

    document.addEventListener("DOMContentLoaded", async () => {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.getElementById('themeSelect').value = savedTheme;
        
        const { data: { session } } = await client.auth.getSession();
        if (session && session.user) { initializeApp(session); } 
        else { window.location.href = "https://birlaone.github.io/BirlaOne/login.html"; }

        client.auth.onAuthStateChange((_event, session) => {
            if (!session) { window.location.href = "https://birlaone.github.io/BirlaOne/login.html"; }
        });
    });
</script>
</body>
</html>
